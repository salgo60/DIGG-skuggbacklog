{
  "cid": 37,
  "lastposttime": 1743084473905,
  "mainPid": 5016,
  "postcount": 1,
  "slug": "1019/enkelt-javascript-för-att-hämta-kulturhistoriska-lämningar-från-nationella-geodataplattformen",
  "tid": 1019,
  "timestamp": 1743084473905,
  "title": "Enkelt javascript för att hämta kulturhistoriska lämningar från Nationella geodataplattformen",
  "uid": 1715,
  "viewcount": 181,
  "postercount": 1,
  "downvotes": 0,
  "upvotes": 2,
  "deleted": 0,
  "locked": 0,
  "pinned": 0,
  "pinExpiry": 0,
  "deleterUid": 0,
  "titleRaw": "Enkelt javascript för att hämta kulturhistoriska lämningar från Nationella geodataplattformen",
  "timestampISO": "2025-03-27T14:07:53.905Z",
  "scheduled": false,
  "lastposttimeISO": "2025-03-27T14:07:53.905Z",
  "pinExpiryISO": "",
  "votes": 2,
  "teaserPid": null,
  "tags": [],
  "thumbs": [],
  "posts": [
    {
      "content": "<p dir=\"auto\">Nedan visas ett enkelt javascript för att hämta kulturhistoriska lämningar i form av referensobjekt från Nationella geodataplattformen. Det sker inget urval utifrån attribut annat än typ. Limit-parametern begränsar hur många objekt som hämtas. Det går att maximalt hämta 10000 objekt åt gången.</p>\n<p dir=\"auto\">Javascriptet hämtar en OAuth2-token från Lantmäteriets API genom att skicka en POST-förfrågan med dina konsumentnycklar. När token har hämtats, används den för att autentisera en annan POST-förfrågan till Lantmäteriets API för att hämta data om kulturhistoriska lämningar. Slutligen loggas den hämtade datan till konsolen.</p>\n<pre><code>        fetch('https://apimanager.lantmateriet.se/oauth2/token', {\n            method: 'POST',\n            headers: {\n                'Authorization': 'Basic ' + btoa('consumerKey:consumerSecret'),\n                'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: 'grant_type=client_credentials'\n        })\n        .then(res =&gt; res.json())\n        .then(token =&gt; fetch('https://api.lantmateriet.se/distribution/geodatakatalog/sokning/v1/kulturhistorisklamning/v1/search', {\n            method: 'POST',\n            headers: {\n                'Authorization': 'Bearer ' + token.access_token,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                \"query\": {\"feature.typ\": {\"eq\": \"kulturhistorisk lämning\"}},\n                \"limit\": 10\n            })\n        }))\n        .then(res =&gt; res.json())\n        .then(data =&gt; console.log(data))\n        .catch(err =&gt; console.error(err));\n</code></pre>\n",
      "pid": 5016,
      "tid": 1019,
      "timestamp": 1743084473905,
      "uid": 1715,
      "downvotes": 0,
      "upvotes": 2,
      "deleted": 0,
      "deleterUid": 0,
      "edited": 0,
      "replies": {
        "hasMore": false,
        "hasSingleImmediateReply": false,
        "users": [],
        "text": "[[topic:one_reply_to_this_post]]",
        "count": 0
      },
      "bookmarks": 0,
      "votes": 2,
      "timestampISO": "2025-03-27T14:07:53.905Z",
      "editedISO": "",
      "index": 0,
      "user": {
        "uid": 1715,
        "username": "lmdaniel",
        "userslug": "lmdaniel",
        "reputation": 37,
        "postcount": 82,
        "topiccount": 10,
        "picture": "/assets/uploads/profile/1715-profileavatar-1718005744305.jpeg",
        "signature": "<p dir=\"auto\">Daniel Regemar<br />\nRegional geodatasamordnare<br />\nLantmäteriet</p>\n",
        "banned": false,
        "banned:expire": 0,
        "status": "offline",
        "lastonline": 1764837375150,
        "groupTitle": "[\"\"]",
        "mutedUntil": 0,
        "displayname": "lmdaniel",
        "groupTitleArray": [
          ""
        ],
        "icon:text": "L",
        "icon:bgColor": "#795548",
        "lastonlineISO": "2025-12-04T08:36:15.150Z",
        "banned_until": 0,
        "banned_until_readable": "Not Banned",
        "muted": false,
        "selectedGroups": [],
        "custom_profile_info": []
      },
      "editor": null,
      "bookmarked": false,
      "upvoted": false,
      "downvoted": false,
      "selfPost": false,
      "events": [],
      "topicOwnerPost": true,
      "display_edit_tools": false,
      "display_delete_tools": false,
      "display_moderator_tools": false,
      "display_move_tools": false,
      "display_post_menu": true
    }
  ],
  "events": [],
  "category": {
    "bgColor": "#8681b1",
    "cid": 37,
    "class": "col-md-3 col-xs-6",
    "color": "#fff",
    "description": "Under denna kategori samlar vi frågor, behov och nyheter som rör användning, hantering och tillgängliggörande av geografiska data, Geodataportalen och den nationella geodataplattformen (NGP).",
    "descriptionParsed": "<p dir=\"auto\">Under denna kategori samlar vi frågor, behov och nyheter som rör användning, hantering och tillgängliggörande av geografiska data, Geodataportalen och den nationella geodataplattformen (NGP).</p>\n",
    "disabled": 0,
    "icon": "fa-globe",
    "imageClass": "cover",
    "isSection": 0,
    "link": "",
    "name": "Geografiska data",
    "numRecentReplies": 1,
    "order": -1,
    "parentCid": 23,
    "post_count": 122,
    "slug": "37/geografiska-data",
    "subCategoriesPerPage": 10,
    "topic_count": 12,
    "image": null,
    "maxTags": 5,
    "minTags": 0,
    "postQueue": 0,
    "totalPostCount": 122,
    "totalTopicCount": 12
  },
  "tagWhitelist": [],
  "minTags": 0,
  "maxTags": 5,
  "thread_tools": [],
  "isFollowing": false,
  "isNotFollowing": true,
  "isIgnoring": false,
  "bookmark": null,
  "postSharing": [
    {
      "id": "facebook",
      "name": "Facebook",
      "class": "fa-facebook",
      "activated": true
    },
    {
      "id": "twitter",
      "name": "Twitter",
      "class": "fa-twitter",
      "activated": true
    }
  ],
  "deleter": null,
  "merger": null,
  "related": [],
  "unreplied": true,
  "icons": [],
  "privileges": {
    "topics:reply": false,
    "topics:read": true,
    "topics:schedule": false,
    "topics:tag": false,
    "topics:delete": false,
    "posts:edit": false,
    "posts:history": false,
    "posts:upvote": false,
    "posts:downvote": false,
    "posts:delete": false,
    "posts:view_deleted": false,
    "read": true,
    "purge": false,
    "view_thread_tools": false,
    "editable": false,
    "deletable": false,
    "view_deleted": false,
    "view_scheduled": false,
    "isAdminOrMod": false,
    "disabled": 0,
    "tid": "1019",
    "uid": 0
  },
  "topicStaleDays": 60,
  "reputation:disabled": 0,
  "downvote:disabled": 1,
  "feeds:disableRSS": 0,
  "signatures:hideDuplicates": 0,
  "bookmarkThreshold": 5,
  "necroThreshold": 7,
  "postEditDuration": 300,
  "postDeleteDuration": 0,
  "scrollToMyPost": true,
  "updateUrlWithPostIndex": true,
  "allowMultipleBadges": true,
  "privateUploads": false,
  "showPostPreviewsOnHover": true,
  "rssFeedUrl": "/topic/1019.rss",
  "postIndex": 1,
  "breadcrumbs": [
    {
      "text": "[[global:home]]",
      "url": "/"
    },
    {
      "text": "[[global:header.categories]]",
      "url": "/categories"
    },
    {
      "text": "Data",
      "url": "/category/23/data",
      "cid": 23
    },
    {
      "text": "Geografiska data",
      "url": "/category/37/geografiska-data",
      "cid": 37
    }
  ],
  "pagination": {
    "prev": {
      "page": 1,
      "active": false
    },
    "next": {
      "page": 1,
      "active": false
    },
    "first": {
      "page": 1,
      "active": true
    },
    "last": {
      "page": 1,
      "active": true
    },
    "rel": [],
    "pages": [],
    "currentPage": 1,
    "pageCount": 1
  },
  "loggedIn": false,
  "loggedInUser": {
    "uid": 0,
    "username": "[[global:guest]]",
    "picture": "",
    "icon:text": "?",
    "icon:bgColor": "#aaa"
  },
  "relative_path": "",
  "template": {
    "name": "topic",
    "topic": true
  },
  "url": "/topic/1019",
  "bodyClass": "page-topic page-topic-1019 template-topic page-topic-category-37 page-topic-category-geografiska-data parent-category-23 parent-category-37 page-status-200 theme-harmony user-guest",
  "_header": {
    "tags": {
      "meta": [
        {
          "name": "viewport",
          "content": "width&#x3D;device-width, initial-scale&#x3D;1.0"
        },
        {
          "name": "content-type",
          "content": "text/html; charset=UTF-8",
          "noEscape": true
        },
        {
          "name": "apple-mobile-web-app-capable",
          "content": "yes"
        },
        {
          "name": "mobile-web-app-capable",
          "content": "yes"
        },
        {
          "property": "og:site_name",
          "content": "Community på Sveriges dataportal"
        },
        {
          "name": "msapplication-badge",
          "content": "frequency=30; polling-uri=https://community.dataportal.se/sitemap.xml",
          "noEscape": true
        },
        {
          "name": "theme-color",
          "content": "#ACB3A8"
        },
        {
          "name": "keywords",
          "content": "öppna data,api,open data,innovation,dataportal,community,forum"
        },
        {
          "name": "msapplication-square150x150logo",
          "content": "/assets/uploads/system/site-logo.svg",
          "noEscape": true
        },
        {
          "name": "title",
          "content": "Enkelt javascript för att hämta kulturhistoriska lämningar från Nationella geodataplattformen"
        },
        {
          "name": "description",
          "content": "Nedan visas ett enkelt javascript för att hämta kulturhistoriska lämningar i form av referensobjekt från Nationella geodataplattformen. Det sker inget urval utifrån attribut annat än typ. Limit-parametern begränsar hur många objekt som hämtas. Det går att..."
        },
        {
          "property": "og:title",
          "content": "Enkelt javascript för att hämta kulturhistoriska lämningar från Nationella geodataplattformen"
        },
        {
          "property": "og:description",
          "content": "Nedan visas ett enkelt javascript för att hämta kulturhistoriska lämningar i form av referensobjekt från Nationella geodataplattformen. Det sker inget urval utifrån attribut annat än typ. Limit-parametern begränsar hur många objekt som hämtas. Det går att..."
        },
        {
          "property": "og:type",
          "content": "article"
        },
        {
          "property": "article:published_time",
          "content": "2025-03-27T14:07:53.905Z"
        },
        {
          "property": "article:modified_time",
          "content": "2025-03-27T14:07:53.905Z"
        },
        {
          "property": "article:section",
          "content": "Geografiska data"
        },
        {
          "property": "og:image",
          "content": "https://community.dataportal.se/assets/uploads/profile/1715-profileavatar-1718005744305.jpeg",
          "noEscape": true
        },
        {
          "property": "og:image:url",
          "content": "https://community.dataportal.se/assets/uploads/profile/1715-profileavatar-1718005744305.jpeg",
          "noEscape": true
        },
        {
          "property": "og:image",
          "content": "https://community.dataportal.se/assets/uploads/system/og-image.jpg",
          "noEscape": true
        },
        {
          "property": "og:image:url",
          "content": "https://community.dataportal.se/assets/uploads/system/og-image.jpg",
          "noEscape": true
        },
        {
          "property": "og:image:width",
          "content": "1600"
        },
        {
          "property": "og:image:height",
          "content": "555"
        },
        {
          "content": "https://community.dataportal.se/api/topic/1019",
          "property": "og:url"
        }
      ],
      "link": [
        {
          "rel": "icon",
          "type": "image/x-icon",
          "href": "/assets/uploads/system/favicon.ico?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "manifest",
          "href": "/manifest.webmanifest",
          "crossorigin": "use-credentials"
        },
        {
          "rel": "search",
          "type": "application/opensearchdescription+xml",
          "title": "Community på Sveriges dataportal",
          "href": "/osd.xml"
        },
        {
          "rel": "apple-touch-icon",
          "href": "/assets/uploads/system/touchicon-orig.png"
        },
        {
          "rel": "icon",
          "sizes": "36x36",
          "href": "/assets/uploads/system/touchicon-36.png"
        },
        {
          "rel": "icon",
          "sizes": "48x48",
          "href": "/assets/uploads/system/touchicon-48.png"
        },
        {
          "rel": "icon",
          "sizes": "72x72",
          "href": "/assets/uploads/system/touchicon-72.png"
        },
        {
          "rel": "icon",
          "sizes": "96x96",
          "href": "/assets/uploads/system/touchicon-96.png"
        },
        {
          "rel": "icon",
          "sizes": "144x144",
          "href": "/assets/uploads/system/touchicon-144.png"
        },
        {
          "rel": "icon",
          "sizes": "192x192",
          "href": "/assets/uploads/system/touchicon-192.png"
        },
        {
          "rel": "prefetch",
          "href": "/assets/src/modules/composer.js?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "prefetch",
          "href": "/assets/src/modules/composer/uploads.js?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "prefetch",
          "href": "/assets/src/modules/composer/drafts.js?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "prefetch",
          "href": "/assets/src/modules/composer/tags.js?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "prefetch",
          "href": "/assets/src/modules/composer/categoryList.js?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "prefetch",
          "href": "/assets/src/modules/composer/resize.js?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "prefetch",
          "href": "/assets/src/modules/composer/autocomplete.js?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "prefetch",
          "href": "/assets/templates/composer.tpl?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "prefetch",
          "href": "/assets/language/sv/topic.json?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "prefetch",
          "href": "/assets/language/sv/modules.json?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "prefetch",
          "href": "/assets/language/sv/tags.json?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "prefetch stylesheet",
          "type": "",
          "href": "/assets/plugins/nodebb-plugin-markdown/styles/default.css"
        },
        {
          "rel": "prefetch",
          "href": "/assets/language/sv/markdown.json?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "stylesheet",
          "href": "https://community.dataportal.se/assets/plugins/nodebb-plugin-emoji/emoji/styles.css?v&#x3D;ri45v5qda1g"
        },
        {
          "rel": "canonical",
          "href": "https://community.dataportal.se/topic/1019/enkelt-javascript-för-att-hämta-kulturhistoriska-lämningar-från-nationella-geodataplattformen",
          "noEscape": true
        },
        {
          "rel": "alternate",
          "type": "application/rss+xml",
          "href": "/topic/1019.rss"
        },
        {
          "rel": "up",
          "href": "https://community.dataportal.se/category/37/geografiska-data"
        },
        {
          "rel": "author",
          "href": "https://community.dataportal.se/user/lmdaniel"
        }
      ]
    }
  },
  "widgets": {
    "footer": [
      {
        "html": "<footer id=\"footer\" class=\"container footer\" style=\"margin-bottom:1em\">\r\n\t<div>\r\n<img src=\"https://community.dataportal.se/assets/uploads/files/finansieras_av_europeiskaunionen.png\" alt=\"Finansieras av Europeiska unionen logo\" width=\"200\" />\r\n\t\t\r\n\t</div>\r\n</footer>"
      }
    ],
    "header": [
      {
        "html": "<h1>Community på Sveriges dataportal</h1>"
      }
    ]
  }
}